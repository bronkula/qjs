(t=>{const e=Array.prototype;class Q{constructor(e,n=t.document,r=!1){let i=q.identify(e,n);if(r&&q.debug(e,n,i),!i)return!1;Object.assign(this,i),this.length=i.length}sift(t){return q(q.sift(this,t))}pipe(t){return q(this.map(t))}toArray(){return this.reduce(((t,e)=>t.concat([e])),[])}toString(){return this.reduce(((t,e)=>t+c(e)?e.outerHTML:`${e}`),"")}toText(){return this.reduce(((t,e)=>t+c(e)?e.innerText:`${e}`),"")}forEach=e.forEach;map=e.map;flatMap=e.flatMap;reduce=e.reduce;some=e.some;every=e.every;filter=e.filter;slice=e.slice;indexOf=e.indexOf}const n=HTMLDocument,r=HTMLElement,i=SVGElement,s=(t,e)=>t instanceof e,o=(t,e)=>typeof t===e,c=t=>s(t,n)||s(t,r)||s(t,i)||s(t,Element),a=t=>s(t,n)||s(t,r),u=t=>s(t,i),h=t=>s(t,Object)&&null!==t&&!d(t),l=t=>o(t,"string")||s(t,String),f=t=>o(t,"function"),p=t=>s(t,Q),d=t=>Array.isArray(t),m=t=>l(t)&&"<"==t.trim()[0],g=t=>l(t)&&"&"==t.trim()[0]&&";"==t.trim().substr(-1),y=t=>{t=o(t,"string")?t:JSON.stringify(t);try{t=JSON.parse(t)}catch(t){return!1}return o(t,"object")&&null!==t},S=t=>d(t)?t:[t],b=t=>m(t)?[...document.createRange().createContextualFragment(t.trim()).childNodes]:[t],A=t=>f(Q.prototype[t]),v=t=>t.flatMap((t=>t?m(t)?b(t):p(t)?t.toArray():t:[])),q=(t,e,n)=>new Q(t,e,n);Object.assign(q,{isElement:c,isHTML:a,isSVG:u,isObject:h,isString:l,isFunction:f,isBool:t=>o(t,"boolean"),isQ:p,isArray:d,isFragment:m,isEntity:g,isJson:y,parse:t=>{try{return JSON.parse(t)}catch(e){return console.error(e),t}},matching:t=>e=>{try{return!t||e.matches(t)}catch(t){return!1}},asArray:S,makeFragment:b,make:t=>q(b(t)),unQ:t=>p(t)?t[0]:t,htmlEncode:function(t){if(!l(t))return t;let e=document.createElement("div");return e.innerHTML=t,e.innerText},extend:(t,e,n=!1)=>{S(t).forEach((t=>{if(A(t)&&!n)throw`QJS already has a ${t} extension.`;A(t)&&!n||(Q.prototype[t]=e)}))},hasExtension:A,sift:(t,e)=>{let n=t.toArray().flatMap(e);return[...new Set(n)]},settle:v,identify:(t,e)=>t&&c(e)?p(t)?t.toArray():c(t)||t===e?[t]:m(t)?b(t):d(t)?v(t):f(t)?!window.addEventListener("DOMContentLoaded",t):e.querySelectorAll(t):[],debug:(t,e,n)=>{const{log:r,group:i,groupEnd:s}=console;i(),r("debug"),r("selector",t),r("selector context",e),r("isHTML SC",a(e)),r("isHTML S",a(t)),r("isSVG S",u(t)),r("isQ S",p(t)),r("isElement S",c(t)),r("isFragment S",m(t)),r("isFunction S",f(t)),r("isArray S",d(t)),r("isEntity S",g(t)),r("isJson S",y(t)),r("isString S",l(t)),r("isObject S",h(t));try{r("querySelectorAll S",e.querySelectorAll(t))}catch(t){}r("node list",n),s()}}),t.q=q})(window),(()=>{if(!q)throw"qjs not imported yet";const{isString:t,isArray:n,isQ:r,unQ:i,htmlEncode:s,parse:o,extend:c,settle:a}=q;function u(){return this.pipe(h)}const h=function(t){return t.innerHTML="",t},l=(t,e)=>{for(let n in e)e.hasOwnProperty(n)&&(t.style[v(n)]=e[n]);return t},f=(t,e)=>{for(let n in e)e.hasOwnProperty(n)&&t.setAttribute(n,e[n]);return t},p=(t,e)=>(t.value=e,t),d=(t,...e)=>(t.innerText=e.join(""),t),m=(e,...n)=>(e.innerHTML="",a(n).forEach((n=>e.append(t(n)?s(n):n))),e),g=(t,e)=>(t.replaceWith(e),t),y=r=>n(r)?e:t(r)?r.split(" "):[],S=function(t,e,n){t.qcache??=A(t),e&&(t.qcache[e]=n)},b=function(t,e){return t.qcache??=A(t),Object.assign(t.qcache,e),t},A=function(t,e){if(void 0===t.qcache){t.qcache={};for(let[e,n]of Object.entries(t.dataset))S(t,e,o(n))}return void 0!==t.dataset[e]&&t.qcache[e]!==t.dataset[e]&&S(t,e,o(t.dataset[e])),void 0===e?t.qcache:t.qcache[e]},v=function(t){return t.replace(/\-([a-z])/g,((t,e)=>e.toUpperCase()))},L=function(t){return t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()))};Object.entries({remove:function(){return this.sift((t=>(t.parentElement?.removeChild(t),!1)))},detach:function(){return this.sift((t=>t.parentElement?.removeChild(t)??t))},empty:u,clear:u,append:function(t){return this.sift((e=>q(t).map((t=>(e.appendChild(t),e)))))},appendTo:function(t){return this.sift((e=>q(t).map((t=>(t.appendChild(e),e)))))},prepend:function(t){return this.sift((e=>q(t).map((t=>(e.insertBefore(t,e.children[0]),e)))))},prependTo:function(t){return this.sift((e=>q(t).map((t=>(t.insertBefore(e,t.children[0]),e)))))},before:function(t){return this.sift((e=>q(t).map((t=>(e.parentElement.insertBefore(t,e),e)))))},after:function(t){return this.sift((e=>q(t).map((t=>(e.parentElement.insertBefore(t,e.nextSibling),e)))))},replaceWith:function(t){return r(t)||(t=q(t)),this.sift((e=>g(e,t[0])))},addClass:function(t){return this.pipe((e=>(y(t).forEach((t=>e.classList.add(t))),e)))},removeClass:function(t){return this.pipe((e=>(y(t).forEach((t=>e.classList.remove(t))),e)))},toggleClass:function(t,e){return this.pipe((n=>(y(t).forEach((t=>n.classList.toggle(t,e))),n)))},hasClass:function(t){return this.some((e=>y(t).every((t=>e.classList.contains(t)))))},addAttr:function(t){return this.pipe((e=>(y(t).forEach((t=>e.setAttribute(t,!0))),e)))},removeAttr:function(t){return this.pipe((e=>(y(t).forEach((t=>e.removeAttribute(t))),e)))},toggleAttr:function(t,e){return this.pipe((n=>(y(t).forEach((t=>n.toggleAttribute(t,e))),n)))},hasAttr:function(t){return this.pipe((e=>y(t).every((t=>e.hasAttribute(t)))))},css:function(e,n){return t(e)?n?window.getComputedStyle(this[0]).getPropertyValue(L(e)):this[0].style[v(e)]:this.pipe((t=>l(t,e)))},attr:function(e){return t(e)?this[0].getAttribute(e):void 0===e?this[0].attributes:this.pipe((t=>f(t,e)))},data:function(e){return t(e)||void 0===e?A(this[0],e):this.pipe((t=>b(t,e)))},val:function(t){return void 0===t?this[0].value:this.pipe((e=>p(e,t)))},html:function(...t){return 0===t.length?this[0].innerHTML:this.pipe((e=>m(e,...t)))},text:function(...t){return 0===t.length?this[0].innerText:this.pipe((e=>d(e,...t)))},rect:function(){return this[0].getBoundingClientRect()},classList:function(){return[...this[0].classList]},className:function(){return this[0].className},index:function(t){return void 0!==t?this.toArray().indexOf(i(t)):this.siblings().index(this[0])}}).forEach((([t,e])=>{c(t,e)})),Object.assign(q,{empty:h,setCSS:l,setAttr:f,setVal:p,setText:d,setHTML:m,replace:g,tokenList:y,setCache:S,setData:b,getData:A,toPropCase:v,toSnakeCase:L})})(),(()=>{if(!q)throw"qjs not imported yet";const{matching:t,extend:e}=q;Object.entries({is:function(t){return this.some(q.matching(t))},not:function(t){return!this.is(t)},next:function(e){return this.sift((n=>[n.nextElementSibling].filter(t(e))))},prev:function(e){return this.sift((n=>[n.previousElementSibling].filter(t(e))))},parent:function(e){return this.sift((n=>[n.parentElement].filter(t(e))))},last:function(e){return q([this[this.length-1]].filter(t(e)))},first:function(e){return q([this[0]].filter(t(e)))},find:function(t){return this.sift((e=>q(t,e)))},closest:function(t){return this.sift((e=>e.closest(t)))},children:function(e){return this.sift((n=>[...n.children].filter(t(e))))},siblings:function(e){return this.sift((n=>[...n.parentElement.children].filter((r=>r!==n&&t(e)(r)))))},matching:function(e){return q(this.filter(t(e)))},notMatching:function(e){return q(this.filter((n=>!t(e)(n))))},item:function(t){return q(this[t])}}).forEach((([t,n])=>{e(t,n)}))})(),(()=>{if(!q)throw"qjs not imported yet";const{asArray:t,isArray:e,isJson:n}=q,{resolve:r,reject:i,all:s}=Promise,o=async t=>{let e=await t.text();return n(e)?r(JSON.parse(e)):i({error:"JSON Malformed",data:e})},c=e=>(n,r=(t=>t))=>n.map((n=>i=>e(...t(n)).then((t=>(i??[]).concat([r(t)]))))),a=t=>t.reduce(((t,n)=>{if(e(n)){const[e=(()=>{}),r=(()=>{})]=n;return t.then(e,r)}return t.then(n)}),r([])),u=e=>n=>s(n.map((n=>e(...t(n))))),h=(t,e)=>fetch(t,e).then(o),l=u(h),f=c(h),p={method:"POST"},d=(t,e)=>fetch(t,{...p,body:JSON.stringify(e)}).then(o),m=u(d),g=c(d),y=(t={})=>Object.entries(t).reduce(((t,[e,n])=>(t.append(e,n),t)),new FormData),S=(t,e)=>fetch(t,{...p,body:y(e)}).then(o),b=u(S),A=c(S),v=async t=>{if(v.files??={},v.files[t])return q(v.files[t]);const e=await fetch(t).then((t=>t.text())).catch((()=>!1));return e&&(v.files[t]=e),q(e)};Object.assign(q,{catchJson:o,promiseList:c,promiseEach:a,get:h,getAll:l,getList:f,getEach:(t,e)=>a(f(t,e)),post:d,postAll:m,postList:g,postEach:(t,e)=>a(g(t,e)),toFormData:y,postForm:S,postFormAll:b,postFormList:A,postFormEach:(t,e)=>a(A(t,e)),getHTML:v})})(),(()=>{if(!q)throw"qjs not imported yet";const{extend:t,isString:e}=q,n=t=>t.path||t.composedPath&&t.composedPath(),r=(t,e)=>n(t).some((t=>t==e)),i=t=>"touch"!=t.type.substring(0,5)?[t]:t.touches.length?t.touches:t.changedTouches,s=(t,e)=>{let n=(e||t.target).getBoundingClientRect();return{x:t.pageX-n.left,y:t.pageY-n.top}};Object.assign(q,{getPath:n,inPath:r,evPoints:i,getEXY:s,getEventXY:(t,e)=>s(i(t)[0],e)}),t(["on","delegate"],(function(...t){const n=t[0],i=e(t[1])?t[2]:t[1],s=e(t[1])?t[1]:void 0,o=e(t[1])?{capture:!0}:t[2];return n.trim().split(/\s+/).forEach((n=>{this.forEach((c=>{c.addEventListener(n,e(t[1])?t=>{this.find(s).forEach((e=>{r(t,e)&&i.call(e,t,e)}))}:i,o)}))})),this}))})();