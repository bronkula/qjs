(t=>{const e=Array.prototype;class Q{constructor(e,r=t.document,n=!1){let i=q.identify(e,r);if(n&&q.debug(e,r,i),!i)return!1;Object.assign(this,i),this.length=i.length}sift(t){return q(q.sift(this,t))}pipe(t){return q(this.map(t))}toArray(){return this.reduce(((t,e)=>t.concat([e])),[])}toString(){return this.reduce(((t,e)=>t+a(e)?e.outerHTML:`${e}`),"")}toText(){return this.reduce(((t,e)=>t+a(e)?e.innerText:`${e}`),"")}forEach=e.forEach;map=e.map;flatMap=e.flatMap;reduce=e.reduce;some=e.some;every=e.every;filter=e.filter;slice=e.slice;indexOf=e.indexOf}const r=HTMLDocument,n=HTMLElement,i=SVGElement,s=(t,e)=>t instanceof e,o=(t,e)=>typeof t===e,a=t=>s(t,r)||s(t,n)||s(t,i)||s(t,Element),c=t=>s(t,r)||s(t,n),l=t=>s(t,i),u=t=>s(t,Object)&&null!==t&&!m(t),h=t=>o(t,"string")||s(t,String),d=t=>o(t,"function"),g=t=>s(t,Q),m=t=>Array.isArray(t),y=t=>h(t)&&"<"==t.trim()[0],f=t=>h(t)&&"&"==t.trim()[0]&&";"==t.trim().substr(-1),p=t=>{t=o(t,"string")?t:JSON.stringify(t);try{t=JSON.parse(t)}catch(t){return!1}return o(t,"object")&&null!==t},S=t=>m(t)?t:[t],b=t=>y(t)?[...document.createRange().createContextualFragment(t.trim()).childNodes]:[t],A=t=>d(Q.prototype[t]),x=t=>t.flatMap((t=>t?y(t)?b(t):g(t)?t.toArray():t:[])),q=(t,e,r)=>new Q(t,e,r);Object.assign(q,{isElement:a,isHTML:c,isSVG:l,isObject:u,isString:h,isFunction:d,isBool:t=>o(t,"boolean"),isQ:g,isArray:m,isFragment:y,isEntity:f,isJson:p,parse:t=>{try{return JSON.parse(t)}catch(e){return console.error(e),t}},matching:t=>e=>{try{return!t||e.matches(t)}catch(t){return!1}},asArray:S,makeFragment:b,make:t=>q(b(t)),unQ:t=>g(t)?t[0]:t,htmlEncode:function(t){if(!h(t))return t;let e=document.createElement("div");return e.innerHTML=t,e.innerText},extend:(t,e,r=!1)=>{S(t).forEach((t=>{if(A(t)&&!r)throw`QJS already has a ${t} extension.`;A(t)&&!r||(Q.prototype[t]=e)}))},hasExtension:A,sift:(t,e)=>{let r=t.toArray().flatMap(e);return[...new Set(r)]},settle:x,identify:(t,e)=>t&&a(e)?g(t)?t.toArray():a(t)||t===e?[t]:y(t)?b(t):m(t)?x(t):d(t)?!window.addEventListener("DOMContentLoaded",t):e.querySelectorAll(t):[],debug:(t,e,r)=>{const{log:n,group:i,groupEnd:s}=console;i(),n("debug"),n("selector",t),n("selector context",e),n("isHTML SC",c(e)),n("isHTML S",c(t)),n("isSVG S",l(t)),n("isQ S",g(t)),n("isElement S",a(t)),n("isFragment S",y(t)),n("isFunction S",d(t)),n("isArray S",m(t)),n("isEntity S",f(t)),n("isJson S",p(t)),n("isString S",h(t)),n("isObject S",u(t));try{n("querySelectorAll S",e.querySelectorAll(t))}catch(t){}n("node list",r),s()}}),t.q=q})(window),(()=>{if(!q)throw"qjs not imported yet";const{extend:t,isString:e}=q,r=t=>t.path||t.composedPath&&t.composedPath(),n=(t,e)=>r(t).some((t=>t==e)),i=t=>"touch"!=t.type.substring(0,5)?[t]:t.touches.length?t.touches:t.changedTouches,s=(t,e)=>{let r=(e||t.target).getBoundingClientRect();return{x:t.pageX-r.left,y:t.pageY-r.top}};Object.assign(q,{getPath:r,inPath:n,evPoints:i,getEXY:s,getEventXY:(t,e)=>s(i(t)[0],e)}),t(["on","delegate"],(function(...t){const r=t[0],i=e(t[1])?t[2]:t[1],s=e(t[1])?t[1]:void 0,o=e(t[1])?{capture:!0}:t[2];return r.trim().split(/\s+/).forEach((r=>{this.forEach((a=>{a.addEventListener(r,e(t[1])?t=>{this.find(s).forEach((e=>{n(t,e)&&i.call(e,t,e)}))}:i,o)}))})),this}))})();