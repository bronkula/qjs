(t=>{const e={},a={navigate:(a,n=!0)=>{"back"==a?null!=t.history.state&&t.history.back():t.history.pushState?i({title:a,url:t.location.origin+t.location.pathname+"#"+a},n):t.location.assign(e.url)},matches:(t,e)=>{if(t[0]!=e[0])return!1;let a={};for(let i in t)if(t[i]!=e[i])if(":"==e[i].slice(0,1))a[e[i].slice(1)]=t[i];else if(t[i]!=e[i])return!1;return a},make:(e,i=(()=>{}),n)=>{let l=n||t.location.hash.slice(1),o=l.split("/"),r={};if(""!=l)for(let[t,n]of Object.entries(e)){if(r={},t==l){i=n;break}let e=t.split("/");if(e[0]==o[0]&&e.length==o.length&&(r=a.matches(o,e),!1!==r)){i=n;break}}return t=>i(r,t)}},i=(a,i)=>{null==a&&(a={title:t.location.hash.slice(1),url:t.location.href}),e.state={...a},t.history[i?"pushState":"replaceState"](a,a.title,a.url),t.document.dispatchEvent(new CustomEvent("pageshow",{detail:{nextPage:{...a},prevPage:{...e.state}}}))};t.q?(a.init=({routes:t={},defaultPage:e=(()=>""),errorPage:a=(()=>"error"),selector:i=".app"})=>{q(document).on("pageshow",(async n=>{const l=async t=>{let e=await t();q(i).html(e)};try{const a=q.route.make(t,e);await l(a)}catch(t){throw l(a),"Page failed: "+t}}))},q((()=>{q(t.document).delegate("click","a[href^='#']",(function(t){t.preventDefault();let e=this.attributes.href.value.slice(1);""!=e&&a.navigate(e)}))})),q.route=a):t.route=a,t.addEventListener("load",(()=>{setTimeout((()=>t.addEventListener("popstate",(t=>i(t.state)))),0)})),t.addEventListener("DOMContentLoaded",(t=>i(null)))})(window);