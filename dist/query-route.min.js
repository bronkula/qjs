(e=>{const t={},a={navigate:(a,n=!0)=>{"back"==a?null!=e.history.state&&e.history.back():e.history.pushState?i({title:a,url:e.location.origin+e.location.pathname+"#"+a},n):e.location.assign(t.url)},matches:(e,t)=>{if(e[0]!=t[0])return!1;let a={};for(let i in e)if(e[i]!=t[i])if(":"==t[i].slice(0,1))a[t[i].slice(1)]=e[i];else if(e[i]!=t[i])return!1;return a},make:(t,i=(()=>{}),n)=>{let l=n||e.location.hash.slice(1),o=l.split("/"),r={};if(""!=l)for(let[e,n]of Object.entries(t)){if(r={},e==l){i=n;break}let t=e.split("/");if(t[0]==o[0]&&t.length==o.length&&(r=a.matches(o,t),!1!==r)){i=n;break}}return e=>i(r,e)}},i=(a,i)=>{null==a&&(a={title:e.location.hash.slice(1),url:e.location.href}),t.state={...a},e.history[i?"pushState":"replaceState"](a,a.title,a.url),e.document.dispatchEvent(new CustomEvent("pageshow",{detail:{nextPage:{...a},prevPage:{...t.state}}}))};e.q?(a.define=({routes:e={},defaultPage:t=(()=>""),errorPage:a=(()=>"error"),selector:i=".app"})=>{q(document).on("pageshow",(async n=>{const l=async e=>{let t=await e();q(i).html(t)};try{const a=q.route.make(e,t);await l(a)}catch(e){throw l(a),"Page failed: "+e}}))},q((()=>{q(e.document).delegate("click","a[href^='#']",(function(e){e.preventDefault();let t=this.attributes.href.value.slice(1);""!=t&&a.navigate(t)}))})),q.route=a):e.route=a,e.addEventListener("load",(()=>{setTimeout((()=>e.addEventListener("popstate",(e=>i(e.state)))),0)})),e.addEventListener("DOMContentLoaded",(e=>i(null)))})(window);